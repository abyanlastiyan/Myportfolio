<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .slide-in {
            animation: slideIn 0.3s ease-in-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        
        .toast {
            transition: all 0.3s ease;
        }
        
        .toast.hide {
            opacity: 0;
            transform: translateY(-20px);
        }
        
        @media (max-width: 768px) {
            .responsive-table {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="flex flex-col md:flex-row justify-between items-center mb-8">
            <div class="mb-4 md:mb-0">
                <h1 class="text-3xl font-bold text-gray-800">Manajemen Persediaan</h1>
                <p class="text-gray-600">Track and manage your inventory items</p>
            </div>
            <button id="addItemBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg flex items-center transition-colors">
                <i class="fas fa-plus mr-2"></i> Add New Item
            </button>
        </header>

        <!-- Filters and Search -->
        <div class="bg-white rounded-lg shadow p-4 mb-6">
            <div class="flex flex-col md:flex-row gap-4">
                <div class="flex-1">
                    <label for="search" class="block text-sm font-medium text-gray-700 mb-1">Search</label>
                    <div class="relative">
                        <input type="text" id="search" placeholder="Search items..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                </div>
                <div class="w-full md:w-48">
                    <label for="categoryFilter" class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                    <select id="categoryFilter" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                        <option value="">All Categories</option>
                        <option value="Electronics">Electronics</option>
                        <option value="Clothing">Clothing</option>
                        <option value="Food">Food</option>
                        <option value="Furniture">Furniture</option>
                        <option value="Office Supplies">Office Supplies</option>
                    </select>
                </div>
                <div class="w-full md:w-48">
                    <label for="locationFilter" class="block text-sm font-medium text-gray-700 mb-1">Location</label>
                    <select id="locationFilter" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                        <option value="">All Locations</option>
                        <option value="Warehouse A">Warehouse A</option>
                        <option value="Warehouse B">Warehouse B</option>
                        <option value="Store Front">Store Front</option>
                        <option value="Storage Room">Storage Room</option>
                    </select>
                </div>
                <div class="flex items-end">
                    <button id="resetFilters" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors">
                        Reset
                    </button>
                </div>
            </div>
        </div>

        <!-- Inventory Table -->
        <div class="bg-white rounded-lg shadow overflow-hidden">
            <div class="responsive-table">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Item Name</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Quantity</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Location</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date Added</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Supplier</th>
                            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="inventoryTableBody" class="bg-white divide-y divide-gray-200">
                        <!-- Items will be loaded here -->
                    </tbody>
                </table>
            </div>
            <div id="loading" class="p-8 text-center text-gray-500">
                <i class="fas fa-spinner fa-spin mr-2"></i> Loading inventory...
            </div>
            <div id="noResults" class="p-8 text-center text-gray-500 hidden">
                No inventory items found. Try adjusting your search or filters.
            </div>
        </div>

        <!-- Pagination -->
        <div class="flex justify-between items-center mt-4">
            <div class="text-sm text-gray-700">
                Showing <span id="startItem">0</span> to <span id="endItem">0</span> of <span id="totalItems">0</span> items
            </div>
            <div class="flex gap-1">
                <button id="prevPage" class="px-3 py-1 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                    Previous
                </button>
                <button id="nextPage" class="px-3 py-1 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                    Next
                </button>
            </div>
        </div>
    </div>

    <!-- Add/Edit Item Modal -->
    <div id="itemModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md slide-in">
            <div class="flex justify-between items-center border-b px-6 py-4">
                <h3 class="text-lg font-semibold text-gray-800" id="modalTitle">Add New Item</h3>
                <button id="closeModal" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="itemForm" class="p-6">
                <input type="hidden" id="itemId">
                <div class="mb-4">
                    <label for="itemName" class="block text-sm font-medium text-gray-700 mb-1">Item Name *</label>
                    <input type="text" id="itemName" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" required>
                    <p class="text-red-500 text-xs mt-1 hidden" id="itemNameError">Item name is required</p>
                </div>
                <div class="mb-4">
                    <label for="itemCategory" class="block text-sm font-medium text-gray-700 mb-1">Category *</label>
                    <select id="itemCategory" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" required>
                        <option value="">Select a category</option>
                        <option value="Electronics">Electronics</option>
                        <option value="Clothing">Clothing</option>
                        <option value="Food">Food</option>
                        <option value="Furniture">Furniture</option>
                        <option value="Office Supplies">Office Supplies</option>
                    </select>
                    <p class="text-red-500 text-xs mt-1 hidden" id="itemCategoryError">Category is required</p>
                </div>
                <div class="mb-4">
                    <label for="itemQuantity" class="block text-sm font-medium text-gray-700 mb-1">Quantity *</label>
                    <input type="number" id="itemQuantity" min="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" required>
                    <p class="text-red-500 text-xs mt-1 hidden" id="itemQuantityError">Quantity must be a positive number</p>
                </div>
                <div class="mb-4">
                    <label for="itemLocation" class="block text-sm font-medium text-gray-700 mb-1">Storage Location *</label>
                    <select id="itemLocation" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" required>
                        <option value="">Select a location</option>
                        <option value="Warehouse A">Warehouse A</option>
                        <option value="Warehouse B">Warehouse B</option>
                        <option value="Store Front">Store Front</option>
                        <option value="Storage Room">Storage Room</option>
                    </select>
                    <p class="text-red-500 text-xs mt-1 hidden" id="itemLocationError">Location is required</p>
                </div>
                <div class="mb-4">
                    <label for="itemSupplier" class="block text-sm font-medium text-gray-700 mb-1">Supplier *</label>
                    <input type="text" id="itemSupplier" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" required>
                    <p class="text-red-500 text-xs mt-1 hidden" id="itemSupplierError">Supplier is required</p>
                </div>
                <div class="flex justify-end gap-3 mt-6">
                    <button type="button" id="cancelForm" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors">
                        Cancel
                    </button>
                    <button type="submit" id="submitForm" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors">
                        Save Item
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md fade-in">
            <div class="flex justify-between items-center border-b px-6 py-4">
                <h3 class="text-lg font-semibold text-gray-800">Confirm Deletion</h3>
                <button id="closeDeleteModal" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="p-6">
                <p class="text-gray-700 mb-6">Are you sure you want to delete this item? This action cannot be undone.</p>
                <div class="flex justify-end gap-3">
                    <button id="cancelDelete" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors">
                        Cancel
                    </button>
                    <button id="confirmDelete" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors">
                        Delete
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="fixed top-4 right-4 space-y-2 z-50"></div>

    <script>
        // Mock database for demonstration
        let inventoryDB = [
            {
                id: '1',
                name: 'Laptop',
                category: 'Electronics',
                quantity: 15,
                location: 'Warehouse A',
                dateAdded: '2023-05-15',
                supplier: 'Tech Suppliers Inc.'
            },
            {
                id: '2',
                name: 'T-Shirt',
                category: 'Clothing',
                quantity: 42,
                location: 'Store Front',
                dateAdded: '2023-06-02',
                supplier: 'Fashion World'
            },
            {
                id: '3',
                name: 'Coffee Beans',
                category: 'Food',
                quantity: 8,
                location: 'Storage Room',
                dateAdded: '2023-06-10',
                supplier: 'Gourmet Foods'
            },
            {
                id: '4',
                name: 'Office Chair',
                category: 'Furniture',
                quantity: 5,
                location: 'Warehouse B',
                dateAdded: '2023-05-28',
                supplier: 'Furniture Plus'
            },
            {
                id: '5',
                name: 'Notebook',
                category: 'Office Supplies',
                quantity: 120,
                location: 'Store Front',
                dateAdded: '2023-06-05',
                supplier: 'Office Depot'
            },
            {
                id: '6',
                name: 'Smartphone',
                category: 'Electronics',
                quantity: 22,
                location: 'Warehouse A',
                dateAdded: '2023-06-12',
                supplier: 'Tech Suppliers Inc.'
            },
            {
                id: '7',
                name: 'Jeans',
                category: 'Clothing',
                quantity: 35,
                location: 'Store Front',
                dateAdded: '2023-05-20',
                supplier: 'Fashion World'
            },
            {
                id: '8',
                name: 'Desk',
                category: 'Furniture',
                quantity: 3,
                location: 'Warehouse B',
                dateAdded: '2023-06-08',
                supplier: 'Furniture Plus'
            },
            {
                id: '9',
                name: 'Kontol',
                category: 'Furniture',
                quantity: 3,
                location: 'Warehouse B',
                dateAdded: '2023-06-08',
                supplier: 'Furniture Plus'
            }
        ];

        // DOM Elements
        const inventoryTableBody = document.getElementById('inventoryTableBody');
        const loadingElement = document.getElementById('loading');
        const noResultsElement = document.getElementById('noResults');
        const searchInput = document.getElementById('search');
        const categoryFilter = document.getElementById('categoryFilter');
        const locationFilter = document.getElementById('locationFilter');
        const resetFiltersBtn = document.getElementById('resetFilters');
        const addItemBtn = document.getElementById('addItemBtn');
        const itemModal = document.getElementById('itemModal');
        const deleteModal = document.getElementById('deleteModal');
        const closeModalBtn = document.getElementById('closeModal');
        const closeDeleteModalBtn = document.getElementById('closeDeleteModal');
        const cancelFormBtn = document.getElementById('cancelForm');
        const cancelDeleteBtn = document.getElementById('cancelDelete');
        const confirmDeleteBtn = document.getElementById('confirmDelete');
        const itemForm = document.getElementById('itemForm');
        const modalTitle = document.getElementById('modalTitle');
        const itemIdInput = document.getElementById('itemId');
        const itemNameInput = document.getElementById('itemName');
        const itemCategoryInput = document.getElementById('itemCategory');
        const itemQuantityInput = document.getElementById('itemQuantity');
        const itemLocationInput = document.getElementById('itemLocation');
        const itemSupplierInput = document.getElementById('itemSupplier');
        const prevPageBtn = document.getElementById('prevPage');
        const nextPageBtn = document.getElementById('nextPage');
        const startItemSpan = document.getElementById('startItem');
        const endItemSpan = document.getElementById('endItem');
        const totalItemsSpan = document.getElementById('totalItems');
        const toastContainer = document.getElementById('toastContainer');

        // App state
        let currentPage = 1;
        const itemsPerPage = 5;
        let currentFilteredItems = [];
        let itemToDelete = null;

        // Initialize the app
        document.addEventListener('DOMContentLoaded', () => {
            loadInventory();
            setupEventListeners();
        });

        // Load inventory data
        function loadInventory() {
            loadingElement.classList.remove('hidden');
            inventoryTableBody.innerHTML = '';
            
            // Simulate API call delay
            setTimeout(() => {
                filterInventory();
                loadingElement.classList.add('hidden');
            }, 800);
        }

        // Filter inventory based on search and filters
        function filterInventory() {
            const searchTerm = searchInput.value.toLowerCase();
            const category = categoryFilter.value;
            const location = locationFilter.value;
            
            currentFilteredItems = inventoryDB.filter(item => {
                const matchesSearch = item.name.toLowerCase().includes(searchTerm) || 
                                     item.supplier.toLowerCase().includes(searchTerm) ||
                                     item.id.includes(searchTerm);
                const matchesCategory = category ? item.category === category : true;
                const matchesLocation = location ? item.location === location : true;
                
                return matchesSearch && matchesCategory && matchesLocation;
            });
            
            updateTable();
            updatePagination();
        }

        // Update the inventory table
        function updateTable() {
            inventoryTableBody.innerHTML = '';
            
            if (currentFilteredItems.length === 0) {
                noResultsElement.classList.remove('hidden');
                return;
            }
            
            noResultsElement.classList.add('hidden');
            
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = Math.min(startIndex + itemsPerPage, currentFilteredItems.length);
            const itemsToDisplay = currentFilteredItems.slice(startIndex, endIndex);
            
            itemsToDisplay.forEach(item => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${item.id}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.name}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getCategoryColor(item.category)}">
                            ${item.category}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        <span class="${item.quantity < 10 ? 'text-red-600 font-semibold' : 'text-gray-500'}">
                            ${item.quantity}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.location}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${formatDate(item.dateAdded)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.supplier}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button class="text-blue-600 hover:text-blue-900 mr-3 edit-btn" data-id="${item.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="text-red-600 hover:text-red-900 delete-btn" data-id="${item.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                inventoryTableBody.appendChild(row);
            });
            
            // Add event listeners to the new buttons
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const itemId = e.currentTarget.getAttribute('data-id');
                    editItem(itemId);
                });
            });
            
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const itemId = e.currentTarget.getAttribute('data-id');
                    showDeleteModal(itemId);
                });
            });
        }

        // Update pagination controls
        function updatePagination() {
            const totalItems = currentFilteredItems.length;
            const totalPages = Math.ceil(totalItems / itemsPerPage);
            
            totalItemsSpan.textContent = totalItems;
            startItemSpan.textContent = Math.min((currentPage - 1) * itemsPerPage + 1, totalItems);
            endItemSpan.textContent = Math.min(currentPage * itemsPerPage, totalItems);
            
            prevPageBtn.disabled = currentPage === 1;
            nextPageBtn.disabled = currentPage === totalPages || totalPages === 0;
        }

        // Get category color for badge
        function getCategoryColor(category) {
            const colors = {
                'Electronics': 'bg-blue-100 text-blue-800',
                'Clothing': 'bg-purple-100 text-purple-800',
                'Food': 'bg-green-100 text-green-800',
                'Furniture': 'bg-yellow-100 text-yellow-800',
                'Office Supplies': 'bg-indigo-100 text-indigo-800'
            };
            return colors[category] || 'bg-gray-100 text-gray-800';
        }

        // Format date for display
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(dateString).toLocaleDateString(undefined, options);
        }

        // Show add item modal
        function showAddModal() {
            modalTitle.textContent = 'Add New Item';
            itemIdInput.value = '';
            itemForm.reset();
            resetValidation();
            itemModal.classList.remove('hidden');
        }

        // Show edit item modal
        function editItem(id) {
            const item = inventoryDB.find(item => item.id === id);
            if (!item) return;
            
            modalTitle.textContent = 'Edit Item';
            itemIdInput.value = item.id;
            itemNameInput.value = item.name;
            itemCategoryInput.value = item.category;
            itemQuantityInput.value = item.quantity;
            itemLocationInput.value = item.location;
            itemSupplierInput.value = item.supplier;
            resetValidation();
            itemModal.classList.remove('hidden');
        }

        // Show delete confirmation modal
        function showDeleteModal(id) {
            itemToDelete = id;
            deleteModal.classList.remove('hidden');
        }

        // Reset form validation
        function resetValidation() {
            document.querySelectorAll('[id$="Error"]').forEach(el => {
                el.classList.add('hidden');
            });
        }

        // Validate form
        function validateForm() {
            let isValid = true;
            resetValidation();
            
            if (!itemNameInput.value.trim()) {
                document.getElementById('itemNameError').classList.remove('hidden');
                isValid = false;
            }
            
            if (!itemCategoryInput.value) {
                document.getElementById('itemCategoryError').classList.remove('hidden');
                isValid = false;
            }
            
            if (!itemQuantityInput.value || parseInt(itemQuantityInput.value) < 0) {
                document.getElementById('itemQuantityError').classList.remove('hidden');
                isValid = false;
            }
            
            if (!itemLocationInput.value) {
                document.getElementById('itemLocationError').classList.remove('hidden');
                isValid = false;
            }
            
            if (!itemSupplierInput.value.trim()) {
                document.getElementById('itemSupplierError').classList.remove('hidden');
                isValid = false;
            }
            
            return isValid;
        }

        // Save item (add or update)
        function saveItem() {
            if (!validateForm()) return;
            
            const itemData = {
                id: itemIdInput.value || generateId(),
                name: itemNameInput.value.trim(),
                category: itemCategoryInput.value,
                quantity: parseInt(itemQuantityInput.value),
                location: itemLocationInput.value,
                dateAdded: itemIdInput.value ? 
                    inventoryDB.find(item => item.id === itemIdInput.value).dateAdded : 
                    new Date().toISOString().split('T')[0],
                supplier: itemSupplierInput.value.trim()
            };
            
            // Simulate API call delay
            setTimeout(() => {
                if (itemIdInput.value) {
                    // Update existing item
                    const index = inventoryDB.findIndex(item => item.id === itemIdInput.value);
                    if (index !== -1) {
                        inventoryDB[index] = itemData;
                    }
                    showToast('Item updated successfully!', 'success');
                } else {
                    // Add new item
                    inventoryDB.push(itemData);
                    showToast('Item added successfully!', 'success');
                }
                
                itemModal.classList.add('hidden');
                loadInventory();
            }, 500);
        }

        // Delete item
        function deleteItem() {
            if (!itemToDelete) return;
            
            // Simulate API call delay
            setTimeout(() => {
                inventoryDB = inventoryDB.filter(item => item.id !== itemToDelete);
                showToast('Item deleted successfully!', 'success');
                deleteModal.classList.add('hidden');
                itemToDelete = null;
                loadInventory();
            }, 500);
        }

        // Generate a new ID
        function generateId() {
            return (inventoryDB.length > 0 ? 
                Math.max(...inventoryDB.map(item => parseInt(item.id))) + 1 : 
                1).toString();
        }

        // Show toast notification
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            const colors = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                info: 'bg-blue-500',
                warning: 'bg-yellow-500'
            };
            
            toast.className = `toast flex items-center justify-between p-4 rounded-lg shadow-lg text-white ${colors[type]} fade-in`;
            toast.innerHTML = `
                <div class="flex items-center">
                    <i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle'} mr-2"></i>
                    <span>${message}</span>
                </div>
                <button class="ml-4 close-toast">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            toastContainer.appendChild(toast);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                toast.classList.add('hide');
                setTimeout(() => toast.remove(), 300);
            }, 5000);
            
            // Manual close
            toast.querySelector('.close-toast').addEventListener('click', () => {
                toast.classList.add('hide');
                setTimeout(() => toast.remove(), 300);
            });
        }

        // Setup event listeners
        function setupEventListeners() {
            // Search and filter events
            searchInput.addEventListener('input', debounce(filterInventory, 300));
            categoryFilter.addEventListener('change', filterInventory);
            locationFilter.addEventListener('change', filterInventory);
            resetFiltersBtn.addEventListener('click', () => {
                searchInput.value = '';
                categoryFilter.value = '';
                locationFilter.value = '';
                filterInventory();
            });
            
            // Modal events
            addItemBtn.addEventListener('click', showAddModal);
            closeModalBtn.addEventListener('click', () => itemModal.classList.add('hidden'));
            closeDeleteModalBtn.addEventListener('click', () => deleteModal.classList.add('hidden'));
            cancelFormBtn.addEventListener('click', () => itemModal.classList.add('hidden'));
            cancelDeleteBtn.addEventListener('click', () => {
                deleteModal.classList.add('hidden');
                itemToDelete = null;
            });
            
            // Form submission
            itemForm.addEventListener('submit', (e) => {
                e.preventDefault();
                saveItem();
            });
            
            // Delete confirmation
            confirmDeleteBtn.addEventListener('click', deleteItem);
            
            // Pagination
            prevPageBtn.addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    updateTable();
                    updatePagination();
                }
            });
            
            nextPageBtn.addEventListener('click', () => {
                const totalPages = Math.ceil(currentFilteredItems.length / itemsPerPage);
                if (currentPage < totalPages) {
                    currentPage++;
                    updateTable();
                    updatePagination();
                }
            });
            
            // Close modals when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === itemModal) {
                    itemModal.classList.add('hidden');
                }
                if (e.target === deleteModal) {
                    deleteModal.classList.add('hidden');
                    itemToDelete = null;
                }
            });
        }

        // Debounce function for search input
        function debounce(func, wait) {
            let timeout;
            return function() {
                const context = this;
                const args = arguments;
                clearTimeout(timeout);
                timeout = setTimeout(() => {
                    func.apply(context, args);
                }, wait);
            };
        }
    </script>
</body>
</html>